from __future__ import annotations

from mono_ai_budget_bot.nlq.text_norm import norm

_CATEGORY_KEYWORDS: list[tuple[str, str]] = [
    ("бари", "Кафе/Ресторани"),
    ("бар", "Кафе/Ресторани"),
    ("паб", "Кафе/Ресторани"),
    ("пиво", "Кафе/Ресторани"),
    ("алко", "Кафе/Ресторани"),
    ("кава", "Кафе/Ресторани"),
    ("кофе", "Кафе/Ресторани"),
    ("coffee", "Кафе/Ресторани"),
    ("кав", "Кафе/Ресторани"),
    ("таксі", "Транспорт"),
    ("такси", "Транспорт"),
    ("taxi", "Транспорт"),
    ("uber", "Транспорт"),
    ("bolt", "Транспорт"),
    ("uklon", "Транспорт"),
    ("уклон", "Транспорт"),
    ("їжа", "Кафе/Ресторани"),
    ("еда", "Кафе/Ресторани"),
    ("food", "Кафе/Ресторани"),
    ("фастфуд", "Кафе/Ресторани"),
    ("маркет", "Маркет/Побут"),
    ("супермаркет", "Маркет/Побут"),
    ("продукти", "Маркет/Побут"),
    ("grocery", "Маркет/Побут"),
    ("grocer", "Маркет/Побут"),
    ("silpo", "Маркет/Побут"),
    ("сільпо", "Маркет/Побут"),
    ("атб", "Маркет/Побут"),
    ("atb", "Маркет/Побут"),
    ("novus", "Маркет/Побут"),
]


def detect_category(text: str) -> str | None:
    t = norm(text)
    if not t:
        return None
    for kw, cat in _CATEGORY_KEYWORDS:
        if kw in t:
            return cat
    return None
